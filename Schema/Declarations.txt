CREATE TABLE USER (
	ID int NOT NULL AUTO_INCREMENT,
	USERNAME varchar(255) NOT NULL,
	PASSWORD varchar(255) NOT NULL,
	SALT varchar(255) /*NOT NULL*/, /*POR AHORA NO USAREMOS SALT*/
	PRIMARY KEY (ID)
) DEFAULT CHARSET = utf8 /*CHARACTER SET*/ 
COLLATE = utf8_unicode_ci /*COLLATION (GENERIC)*/
ENGINE = INNODB; /*OTHER ENGINES DO NOT SUPPORT FK DECLARATIONS*/

CREATE TABLE FOLLOWS (
	FOLLOWERID int NOT NULL,
	FOLLOWEDID int NOT NULL,
	PRIMARY KEY (FOLLOWERID, FOLLOWEDID),
	FOREIGN KEY (FOLLOWERID) REFERENCES USER(ID), /*ID'S AS FK TO HAVE SMALLER PK, MAX IS 1KB*/
	FOREIGN KEY (FOLLOWEDID) REFERENCES USER(ID)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE EVENT (
	ID int NOT NULL AUTO_INCREMENT,
	ORGANIZERID varchar(255) NOT NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (ORGANIZERID) REFERENCES USER(ID)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE ATTENDS (
	ATTENDEEID int NOT NULL,
	EVENTID int NOT NULL,
	PRIMARY KEY (ATTENDEEID, EVENTID),
	FOREIGN KEY (ATTENDEEID) REFERENCES USER(ID),
	FOREIGN KEY (EVENTID) REFERENCES EVENT(ID)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE COMMENT (
	ID int NOT NULL AUTO_INCREMENT, /*EN CASO DE PERMITIR UN UNICO COMMENT POR USUARIO Y POST QUITAR ID PK=USERNAME,EVENTID*/
	TEXT varchar(512), 	/*EN CASO DE QUERER COMENTARIO OBLIGATORIO PONER NOT NULL*/
	USERID int NOT NULL,
	EVENTID int NOT NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (USERID) REFERENCES USER(ID),
	FOREIGN KEY (EVENTID) REFERENCES EVENT(ID)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE CATEGORY (
	ID int NOT NULL AUTO_INCREMENT,
	NAME varchar(128) NOT NULL,
	PRIMARY KEY (ID)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE LIKINGS (
	USERID int NOT NULL,
	CATEGORYID int NOT NULL,
	PRIMARY KEY (USERID, CATEGORYID),
	FOREIGN KEY (USERID) REFERENCES USER(ID),
	FOREIGN KEY (CATEGORYID) REFERENCES CATEGORY(ID)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE CLASSIFICATION (
	EVENTID int NOT NULL,
	CATEGORYID int NOT NULL,
	PRIMARY KEY (EVENTID, CATEGORYID),
	FOREIGN KEY (EVENTID) REFERENCES EVENT(ID),
	FOREIGN KEY (CATEGORYID) REFERENCES CATEGORY(ID)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;
	