CREATE TABLE USER (
	ID int NOT NULL AUTO_INCREMENT,
	USERNAME varchar(255) NOT NULL,
	PASSWORD varchar(255) NOT NULL,
	SALT varchar(255) /*NOT NULL*/, /*POR AHORA NO USAREMOS SALT*/
	PRIMARY KEY (ID)
) DEFAULT CHARSET = utf8 /*CHARACTER SET*/ 
COLLATE = utf8_unicode_ci /*COLLATION (GENERIC)*/
ENGINE = INNODB; /*OTHER ENGINES DO NOT SUPPORT FK DECLARATIONS*/

CREATE TABLE FOLLOWS (
	FOLLOWER varchar(255) NOT NULL,
	FOLLOWED varchar(255) NOT NULL,
	PRIMARY KEY (FOLLOWER, FOLLOWED),
	FOREIGN KEY (FOLLOWER) REFERENCES USER(USERNAME),
	FOREIGN KEY (FOLLOWED) REFERENCES USER(USERNAME)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE EVENT (
	ID int NOT NULL AUTO_INCREMENT,
	ORGANIZER varchar(255) NOT NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (ORGANIZER) REFERENCES USER(USERNAME)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE ATTENDS (
	ATTENDEE varchar(255) NOT NULL,
	EVENTID int NOT NULL,
	PRIMARY KEY (ATTENDEE, EVENTID),
	FOREIGN KEY (ATTENDEE) REFERENCES USER(USERNAME),
	FOREIGN KEY (EVENTID) REFERENCES EVENT(ID)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE COMMENT (
	ID int NOT NULL AUTO_INCREMENT, /*EN CASO DE PERMITIR UN UNICO COMMENT POR USUARIO Y POST QUITAR ID PK=USERNAME,EVENTID*/
	TEXT varchar(512), 	/*EN CASO DE QUERER COMENTARIO OBLIGATORIO PONER NOT NULL*/
	USERNAME varchar(255) NOT NULL,
	EVENTID int NOT NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (USERNAME) REFERENCES USER(USERNAME),
	FOREIGN KEY (EVENTID) REFERENCES EVENT(ID)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE CATEGORY (
	NAME varchar(128) NOT NULL,
	PRIMARY KEY (NAME)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE LIKINGS (
	USERNAME varchar(255) NOT NULL,
	CATEGORYNAME varchar 128 NOT NULL,
	PRIMARY KEY (USERNAME, CATEGORYNAME),
	FOREIGN KEY (USERNAME) REFERENCES USER(USERNAME),
	FOREIGN KEY (CATEGORYNAME) REFERENCES CATEGORY(NAME)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;

CREATE TABLE CLASSIFICATION (
	EVENTID int NOT NULL,
	CATEGORYNAME varchar(128) NOT NULL,
	PRIMARY KEY (EVENTID, CATEGORYNAME),
	FOREIGN KEY (EVENTID) REFERENCES EVENT(ID),
	FORIGN KEY (CATEGORYNAME) REFERENCES CATEGORY(NAME)
) DEFAULT CHARSET = utf8
COLLATE = utf8_unicode_ci
ENGINE = INNODB;
	