;CREATE TABLE "USER" (
	"ID" serial PRIMARY KEY,
	"USERNAME" varchar(255) NOT NULL UNIQUE,
	"PASSWORD" varchar(255) NOT NULL,
	"MAIL" varchar(255) NOT NULL UNIQUE,
	"SALT" varchar(255), /*NOT NULL*/ /*POR AHORA NO USAREMOS SALT*/
	"SALDO" int, 
	"PIC" text,
	"VERIFIED" boolean,
	"BANNED" boolean DEFAULT FALSE,
	"SPONSOR" boolean DEFAULT FALSE
);


CREATE TABLE "CATEGORY" (
	"ID" serial NOT NULL PRIMARY KEY,
	"NAME" varchar(128) NOT NULL

);

CREATE TABLE "FOLLOWS" (
	"FOLLOWERID" int NOT NULL REFERENCES "USER"("ID"),
	"FOLLOWEDID" int NOT NULL REFERENCES "USER"("ID"),
	"SUBSCRIBED" boolean, /*Indica si followerid está suscrito a followedid*/
	PRIMARY KEY ("FOLLOWERID", "FOLLOWEDID")
);

CREATE TABLE "EVENT" (
	"ID" serial NOT NULL PRIMARY KEY,
	"ORGANIZERID" int NOT NULL REFERENCES "USER"("ID"),
    "TITLE" varchar(255) NOT NULL,
	"FECHA_INI" varchar(255) ,
	"FECHA_FIN" varchar(255) ,
	"HORA_INI" varchar(255) ,
	"HORA_FIN" varchar(255) ,
	"PRECIO"   float ,
	"PIC"	   text,
	"CIUDAD"   varchar(255),
	"CATEGORIA" int,
	"DESTACADO" boolean

);

CREATE TABLE "SPONSORED" (
	"USERID" int REFERENCES "USER",
	"EVENTID" int REFERENCES "EVENT" ON DELETE CASCADE,
	PRIMARY KEY("USERID","EVENTID")
);

CREATE TABLE "CALENDAR" (
	"USERID" int REFERENCES "USER"("ID"),
	"EVENTID" int REFERENCES "EVENT"("ID") ON DELETE CASCADE,
	PRIMARY KEY("USERID", "EVENTID"),
	"FECHA" varchar(255)
);

CREATE TABLE "COMMENT" (
	"POINTS" int,
	"TEXT" varchar(512), 	/*EN CASO DE QUERER COMENTARIO OBLIGATORIO PONER NOT NULL*/
	"USERID" int NOT NULL REFERENCES "USER"("ID"),
	"EVENTID" int NOT NULL REFERENCES "EVENT"("ID") ON DELETE CASCADE,
	PRIMARY KEY ("USERID","EVENTID")
);

CREATE TABLE "LIKINGS" (
	"USERID" int NOT NULL REFERENCES "USER"("ID"),
	"CATEGORYID" int NOT NULL,
	PRIMARY KEY ("USERID", "CATEGORYID")
);

